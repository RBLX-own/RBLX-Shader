-- RBLX Enchancer v3 - Ultra Mini Side Panel (LocalScript)
-- Place in StarterPlayerScripts
-- Fully recoded: tiny draggable side panel, perfect square icon, white theme, settings for every feature

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local Lighting = game:GetService("Lighting")
local StarterGui = game:GetService("StarterGui")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "RBLXEnchancer"
screenGui.ResetOnSpawn = false
screenGui.Parent = playerGui

-- ===================== TELEGRAM (unchanged, centered) =====================
local telegramPanel = Instance.new("Frame")
telegramPanel.Size = UDim2.new(0, 400, 0, 310)
telegramPanel.Position = UDim2.new(0.5, -200, 0.5, -155)
telegramPanel.BackgroundColor3 = Color3.fromRGB(15, 25, 45)
telegramPanel.Parent = screenGui

local tc = Instance.new("UICorner", telegramPanel); tc.CornerRadius = UDim.new(0, 24)
local ts = Instance.new("UIStroke", telegramPanel); ts.Color = Color3.fromRGB(0, 170, 255); ts.Thickness = 4

local tbg = Instance.new("ImageLabel", telegramPanel)
tbg.Size = UDim2.new(1,0,1,0)
tbg.Image = "rbxassetid://121158130775447"
tbg.ImageTransparency = 0.65

-- (rest of telegram UI same as before - logo, texts, buttons)
local tlogo = Instance.new("ImageLabel", telegramPanel)
tlogo.Size = UDim2.new(0,110,0,110); tlogo.Position = UDim2.new(0.5,-55,0.12,0)
tlogo.Image = "rbxassetid://6031094678"

local title = Instance.new("TextLabel", telegramPanel)
title.Size = UDim2.new(0.9,0,0.12,0); title.Position = UDim2.new(0.05,0,0.42,0)
title.Text = "JOIN OUR COMMUNITY"; title.TextColor3 = Color3.new(1,1,1); title.TextScaled = true; title.Font = Enum.Font.GothamBlack

local linkBtn = Instance.new("TextButton", telegramPanel)
linkBtn.Size = UDim2.new(0.85,0,0.1,0); linkBtn.Position = UDim2.new(0.075,0,0.57,0)
linkBtn.Text = "t.me/RBLX_SCRIPTS_MYANMAR"; linkBtn.BackgroundColor3 = Color3.fromRGB(30,40,60)
linkBtn.TextColor3 = Color3.fromRGB(100,200,255); linkBtn.TextScaled = true
local lc = Instance.new("UICorner", linkBtn); lc.CornerRadius = UDim.new(0,12)

linkBtn.MouseButton1Click:Connect(function()
    setclipboard("https://t.me/RBLX_SCRIPTS_MYANMAR")
    StarterGui:SetCore("SendNotification", {Title="✅ Copied", Text="Link saved!", Duration=2})
end)

local joinB = Instance.new("TextButton", telegramPanel)
joinB.Size = UDim2.new(0.6,0,0.11,0); joinB.Position = UDim2.new(0.2,0,0.72,0)
joinB.Text = "JOIN TELEGRAM"; joinB.BackgroundColor3 = Color3.fromRGB(0,136,204); joinB.TextColor3 = Color3.new(1,1,1)
local jc = Instance.new("UICorner", joinB); jc.CornerRadius = UDim.new(0,16)

local contB = Instance.new("TextButton", telegramPanel)
contB.Size = UDim2.new(0.5,0,0.1,0); contB.Position = UDim2.new(0.25,0,0.86,0)
contB.Text = "Continue"; contB.BackgroundColor3 = Color3.fromRGB(0,255,180); contB.TextColor3 = Color3.new(0,0,0)
local cc = Instance.new("UICorner", contB); cc.CornerRadius = UDim.new(0,16)

-- ===================== PERFECT SQUARE ICON (draggable) =====================
local square = Instance.new("ImageButton")
square.Size = UDim2.new(0, 92, 0, 92)
square.Position = UDim2.new(0.03, 0, 0.4, 0)
square.Image = "rbxassetid://121158130775447"
square.BackgroundTransparency = 1
square.Visible = false
square.Parent = screenGui

local sc = Instance.new("UICorner", square); sc.CornerRadius = UDim.new(1, 0)
local ss = Instance.new("UIStroke", square); ss.Color = Color3.fromRGB(255,255,255); ss.Thickness = 8; ss.Transparency = 0.2

-- Draggable square
local sdrag, sstart, spos
square.InputBegan:Connect(function(i)
    if i.UserInputType == Enum.UserInputType.MouseButton1 then
        sdrag = true
        sstart = i.Position
        spos = square.Position
    end
end)
square.InputChanged:Connect(function(i)
    if i.UserInputType == Enum.UserInputType.MouseMovement and sdrag then
        local delta = i.Position - sstart
        square.Position = UDim2.new(spos.X.Scale, spos.X.Offset + delta.X, spos.Y.Scale, spos.Y.Offset + delta.Y)
    end
end)
square.InputEnded:Connect(function(i)
    if i.UserInputType == Enum.UserInputType.MouseButton1 then sdrag = false end
end)

-- ===================== MINI DRAGGABLE SIDE PANEL =====================
local main = Instance.new("Frame")
main.Size = UDim2.new(0, 215, 0, 295)   -- VERY SMALL
main.Position = UDim2.new(0, 130, 0.5, -147)
main.BackgroundColor3 = Color3.fromRGB(22, 24, 38)
main.Visible = false
main.Parent = screenGui

local mc = Instance.new("UICorner", main); mc.CornerRadius = UDim.new(0, 18)
local mg = Instance.new("UIGradient", main)
mg.Color = ColorSequence.new{ColorSequenceKeypoint.new(0, Color3.fromRGB(35,40,65)), ColorSequenceKeypoint.new(1, Color3.fromRGB(18,20,32))}

local mbg = Instance.new("ImageLabel", main)
mbg.Size = UDim2.new(1,0,1,0); mbg.Image = "rbxassetid://121158130775447"; mbg.ImageTransparency = 0.85

local title = Instance.new("TextLabel", main)
title.Size = UDim2.new(1,0,0.18,0)
title.Text = "ENCHANCER"
title.TextColor3 = Color3.fromRGB(255,255,255)
title.TextScaled = true
title.Font = Enum.Font.GothamBlack

-- Close
local close = Instance.new("TextButton", main)
close.Size = UDim2.new(0,32,0,32); close.Position = UDim2.new(1,-40,0,8)
close.Text = "✕"; close.TextColor3 = Color3.fromRGB(255,100,100); close.BackgroundTransparency = 1
close.TextScaled = true

-- FPS
local fps = Instance.new("TextLabel", main)
fps.Size = UDim2.new(0.92,0,0.12,0); fps.Position = UDim2.new(0.04,0,0.2,0)
fps.Text = "FPS: 60"; fps.TextColor3 = Color3.fromRGB(0,255,180); fps.TextScaled = true; fps.Font = Enum.Font.GothamBold

-- Settings Gear
local gear = Instance.new("TextButton", main)
gear.Size = UDim2.new(0,34,0,34); gear.Position = UDim2.new(1,-42,0.18,0)
gear.Text = "⚙"; gear.TextColor3 = Color3.fromRGB(255,255,255); gear.BackgroundTransparency = 1
gear.TextScaled = true

-- ===================== WHITE THEME TOGGLES =====================
local function createToggle(name, yPos)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0.88, 0, 0.11, 0)
    btn.Position = UDim2.new(0.06, 0, yPos, 0)
    btn.Text = name
    btn.BackgroundColor3 = Color3.fromRGB(255,255,255)
    btn.TextColor3 = Color3.fromRGB(30,30,40)
    btn.TextScaled = true
    btn.Font = Enum.Font.GothamSemibold
    btn.Parent = main
    
    local c = Instance.new("UICorner", btn); c.CornerRadius = UDim.new(0, 12)
    local s = Instance.new("UIStroke", btn); s.Color = Color3.fromRGB(0, 255, 220); s.Thickness = 2.5
    return btn
end

local shaderBtn   = createToggle("Ultra Shader", 0.36)
local fpsBtn      = createToggle("FPS Boost", 0.50)
local brightBtn   = createToggle("Fullbright", 0.64)
local speedBtn    = createToggle("Speed x2", 0.78)

-- ===================== SETTINGS PANEL =====================
local settingsFrame = Instance.new("Frame")
settingsFrame.Size = UDim2.new(0, 240, 0, 260)
settingsFrame.Position = UDim2.new(0.5, 240, 0.5, -130)
settingsFrame.BackgroundColor3 = Color3.fromRGB(20,22,35)
settingsFrame.Visible = false
settingsFrame.Parent = screenGui

local sc2 = Instance.new("UICorner", settingsFrame); sc2.CornerRadius = UDim.new(0, 18)
local sg = Instance.new("UIGradient", settingsFrame)
sg.Color = ColorSequence.new{ColorSequenceKeypoint.new(0, Color3.fromRGB(45,50,75)), ColorSequenceKeypoint.new(1, Color3.fromRGB(20,22,35))}

local stitle = Instance.new("TextLabel", settingsFrame)
stitle.Size = UDim2.new(1,0,0.15,0); stitle.Text = "FEATURE SETTINGS"; stitle.TextColor3 = Color3.new(1,1,1); stitle.TextScaled = true; stitle.Font = Enum.Font.GothamBold

local closeSettings = Instance.new("TextButton", settingsFrame)
closeSettings.Size = UDim2.new(0,30,0,30); closeSettings.Position = UDim2.new(1,-38,0,8)
closeSettings.Text = "✕"; closeSettings.TextColor3 = Color3.fromRGB(255,100,100); closeSettings.BackgroundTransparency = 1

-- Shader settings
local shInt = Instance.new("TextLabel", settingsFrame)
shInt.Size = UDim2.new(0.9,0,0.12,0); shInt.Position = UDim2.new(0.05,0,0.22,0)
shInt.Text = "Shader Intensity: 3"; shInt.TextColor3 = Color3.new(1,1,1)

local function makeSlider(label, min, max, default, callback)
    local frame = Instance.new("Frame", settingsFrame)
    frame.Size = UDim2.new(0.85,0,0.08,0); frame.Position = UDim2.new(0.075,0, label, 0)
    frame.BackgroundColor3 = Color3.fromRGB(40,45,65)
    local fc = Instance.new("UICorner", frame); fc.CornerRadius = UDim.new(0,8)
    
    local fill = Instance.new("Frame", frame)
    fill.Size = UDim2.new(0.6,0,1,0)
    fill.BackgroundColor3 = Color3.fromRGB(0,255,220)
    local fcc = Instance.new("UICorner", fill)
    
    local val = Instance.new("TextLabel", frame)
    val.Size = UDim2.new(1,0,1,0); val.Text = tostring(default); val.TextColor3 = Color3.new(1,1,1)
    val.BackgroundTransparency = 1
    
    -- Simple click to change
    frame.MouseButton1Click:Connect(function()
        local v = tonumber(val.Text) + 1
        if v > max then v = min end
        val.Text = tostring(v)
        callback(v)
    end)
end

makeSlider(0.36, 1, 5, 3, function(v) -- will be used for shader
    if shaderEnabled then
        local bloom = Lighting:FindFirstChild("Bloom") or Instance.new("BloomEffect", Lighting)
        bloom.Intensity = v * 1.1
    end
end)

-- More settings can be added easily...

-- ===================== LOGIC =====================
local states = {shader = false, fpsb = false, bright = false, speed = false}

local function updateToggle(btn, state)
    if state then
        btn.BackgroundColor3 = Color3.fromRGB(0, 255, 220)
        btn.TextColor3 = Color3.fromRGB(20,20,30)
    else
        btn.BackgroundColor3 = Color3.fromRGB(255,255,255)
        btn.TextColor3 = Color3.fromRGB(30,30,40)
    end
end

-- Shader
local shaderEnabled = false
shaderBtn.MouseButton1Click:Connect(function()
    shaderEnabled = not shaderEnabled
    updateToggle(shaderBtn, shaderEnabled)
    -- (same shader code as before but cleaner)
    if shaderEnabled then
        Lighting.Brightness = 4.5
        Lighting.GlobalShadows = true
        local bloom = Lighting:FindFirstChild("Bloom") or Instance.new("BloomEffect", Lighting); bloom.Intensity = 3
        local sun = Lighting:FindFirstChild("SunRays") or Instance.new("SunRaysEffect", Lighting); sun.Intensity = 0.5
        local atm = Lighting:FindFirstChild("Atmosphere") or Instance.new("Atmosphere", Lighting); atm.Density = 0.3
    else
        for _,v in pairs(Lighting:GetChildren()) do if v:IsA("PostEffect") or v:IsA("Atmosphere") then v.Enabled = false end end
        Lighting.Brightness = 2
    end
end)

-- FPS Boost
fpsBtn.MouseButton1Click:Connect(function()
    states.fpsb = not states.fpsb
    updateToggle(fpsBtn, states.fpsb)
    if states.fpsb then
        settings().Rendering.QualityLevel = Enum.QualityLevel.Level01
        Lighting.GlobalShadows = false
        for _,o in pairs(workspace:GetDescendants()) do
            if o:IsA("ParticleEmitter") or o:IsA("Trail") then o.Enabled = false end
        end
    else
        settings().Rendering.QualityLevel = Enum.QualityLevel.Automatic
    end
end)

-- Fullbright, Speed same style...
brightBtn.MouseButton1Click:Connect(function()
    states.bright = not states.bright
    updateToggle(brightBtn, states.bright)
    Lighting.Brightness = states.bright and 7 or 2
end)

speedBtn.MouseButton1Click:Connect(function()
    states.speed = not states.speed
    updateToggle(speedBtn, states.speed)
    if player.Character and player.Character:FindFirstChild("Humanoid") then
        player.Character.Humanoid.WalkSpeed = states.speed and 36 or 16
    end
end)

-- Settings
gear.MouseButton1Click:Connect(function()
    settingsFrame.Visible = not settingsFrame.Visible
end)
closeSettings.MouseButton1Click:Connect(function()
    settingsFrame.Visible = false
end)

-- Draggable main panel
local dragging, dragInput, dragStart, startPos
main.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = main.Position
    end
end)
main.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement and dragging then
        local delta = input.Position - dragStart
        main.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)
main.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = false end
end)

close.MouseButton1Click:Connect(function()
    main.Visible = false
end)

square.MouseButton1Click:Connect(function()
    main.Visible = not main.Visible
end)

contB.MouseButton1Click:Connect(function()
    telegramPanel:Destroy()
    square.Visible = true
    main.Visible = true
end)

-- FPS Counter
local frames = 0; local last = tick()
RunService.RenderStepped:Connect(function()
    frames += 1
    if tick() - last >= 1 then
        fps.Text = "FPS: " .. frames
        frames = 0
        last = tick()
    end
end)

print("RBLX Enchancer loaded - tiny white side panel ready ✨ Drag the square & panel!")